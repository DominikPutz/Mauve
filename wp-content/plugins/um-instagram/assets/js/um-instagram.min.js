"object"!=typeof window.UM&&(window.UM={}),window.UM.instagram={ajax:{get_photos:function(){var a={action:"um_instagram_get_photos",dataType:"json",metakey:UM.instagram.block.wrap.attr("data-metakey"),um_user_id:UM.instagram.block.wrap.attr("data-user_id"),viewing:UM.instagram.block.wrap.attr("data-viewing"),nonce:um_scripts.nonce};return jQuery.ajax({method:"POST",url:wp.ajax.settings.url,data:a,dataType:"json",beforeSend:function(a){UM.instagram.block.preload.css({backgroundImage:"url("+um_instagram.image_loader+")"}).fadeIn()},success:function(a){"object"==typeof a&&(UM.instagram.data=jQuery.extend(UM.instagram.data,{offset:0,shownPhotos:a.photos.slice(0,6),photos:a.photos,total:a.photos.length,viewing:"true"}),UM.instagram.template.paginate(UM.instagram.data),UM.instagram.template.photos(UM.instagram.data),UM.instagram.preload())},error:function(a){console.log(a)}})}},block:{content:jQuery("#um-ig-content"),gallery:jQuery("#um-ig-show_photos"),paginate:jQuery("#um-ig-content .um-ig-paginate"),preload:jQuery("#um-ig-preload"),wrap:jQuery("#um-ig-photo-wrap")},data:{offset:0,photos:{},total:0},preload:function(){UM.instagram.block.content.css({display:"block",height:"1px",overflowY:"hidden"}),UM.instagram.block.preload.css({display:"block"}),UM.instagram.block.content.find("a img").hover(function(a){jQuery(a.currentTarget).stop().animate({opacity:.7})},function(a){jQuery(a.currentTarget).stop().animate({opacity:1})}),setTimeout(function(){var o=UM.instagram.block.gallery.children("li:first").width();UM.instagram.block.gallery.children("li").each(function(a,t){var n=jQuery(t);n.height()>=o&&n.css({height:o+"px",overflowY:"hidden"}),n.height()<o&&n.css({overflowX:"hidden"}).find("img").css({height:o+"px"})}),UM.instagram.block.content.removeAttr("style")},600),setTimeout(function(){UM.instagram.block.preload.css({display:"none"}),UM.instagram.block.content.fadeIn()},800)},setup:function(){UM.instagram.block.gallery.length?(UM.instagram.block.nav_previous=UM.instagram.block.content.find("a.nav-left"),UM.instagram.block.nav_previous.on("click",UM.instagram.showPrev),UM.instagram.data.offset-6<0&&UM.instagram.block.nav_previous.hide(),UM.instagram.block.nav_next=UM.instagram.block.content.find("a.nav-right"),UM.instagram.block.nav_next.on("click",UM.instagram.showNext),UM.instagram.data.offset+6>UM.instagram.data.total&&UM.instagram.block.nav_next.hide(),UM.instagram.block.disconnect=UM.instagram.block.content.siblings(".um-ig-photos_disconnect"),UM.instagram.block.disconnect.on("click",function(){jQuery(".um-ig-photos_metakey").val(""),jQuery(".um-form form").submit()})):UM.instagram.ajax.get_photos().done(function(a){"object"!=typeof a||a.has_error||UM.instagram.setup()})},showNext:function(){var a=Math.min(UM.instagram.data.offset+6,UM.instagram.data.photos.length);UM.instagram.block.preload.css({height:UM.instagram.block.content.height()+"px"}),UM.instagram.data=jQuery.extend(UM.instagram.data,{offset:a,shownPhotos:UM.instagram.data.photos.slice(a,a+6)}),UM.instagram.template.paginate(UM.instagram.data),UM.instagram.template.photos(UM.instagram.data),UM.instagram.preload(),a+6>=UM.instagram.data.total&&UM.instagram.block.nav_next.hide(),UM.instagram.block.nav_previous.show()},showPrev:function(){var a=Math.max(UM.instagram.data.offset-6,0);UM.instagram.block.preload.css({height:UM.instagram.block.content.height()+"px"}),UM.instagram.data=jQuery.extend(UM.instagram.data,{offset:a,shownPhotos:UM.instagram.data.photos.slice(a,a+6)}),UM.instagram.template.paginate(UM.instagram.data),UM.instagram.template.photos(UM.instagram.data),UM.instagram.preload(),a-6<0&&UM.instagram.block.nav_previous.hide(),UM.instagram.block.nav_next.show()},template:{paginate:function(a,t){t=t||UM.instagram.block.paginate;var n="<span>"+(a=jQuery.extend(UM.instagram.data,{firstSeen:a.offset+1,lastSeen:Math.min(a.offset+6,a.total)})).firstSeen+" - "+a.lastSeen+"/"+a.total+"</span>";t.html(n)},photos:function(a,t){t=t||UM.instagram.block.wrap,a=jQuery.extend(UM.instagram.data,a||{});var n="";for(var o in n+='<ul id="um-ig-show_photos" data-offset="'+a.offset+'" data-photos-count="'+a.total+'" data-viewing="'+a.viewing+'">',a.shownPhotos){var e=a.shownPhotos[o];n+="<li>",n+='\t<a class="um-photo-modal" href="'+e.images.standard_resolution.url+'" data-src="'+e.images.standard_resolution.url+'">',n+='\t\t<img class="um-lazy" src="'+e.images.thumbnail.url+'" data-original="'+e.images.standard_resolution.url+'" />',n+="\t</a>",n+="</li>"}for(;++o<6||o%6!=0;)n+='<li class="um-ig-photo-placeholder"></li>';return n+="</ul>",UM.instagram.block.gallery=t.html(n).find("#um-ig-show_photos")}}},jQuery(function(){UM.instagram.setup()});